<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ネコロジア｜特設ページ</title>
 <link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#0b0f1c">
<link rel="apple-touch-icon" href="icons/icon-192.png">

<style>
 :root{
  --ink:#fdf6e3; --muted:#9ab0d4; --accent:#71ffd8; --bg:#070c18;
  --neon:#00ffd0; --neon2:#83aaff;
}
html,body{height:100%}

/* 1) bodyは単色＋疑似要素の土台に */
body{
  margin:0;
  color:var(--ink);
  font-family: ui-sans-serif,system-ui,"Hiragino Kaku Gothic ProN","Meiryo",sans-serif;
  background:#070c18;           /* ← 単色にする */
  position: relative;           /* ← 疑似要素のために追加 */
}

/* 2) 固定の背景レイヤー（スクロールしても動かない） */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background:
    radial-gradient(1200px 600px at 70% -10%, rgba(8,40,60,.35), transparent 60%),
    linear-gradient(180deg,#01001F,#070c18 40%,#040811);
}

.wrap{max-width:880px; margin:0 auto; padding:28px 16px 64px}
header{display:flex; align-items:center; justify-content:center}
.logo-img{display:block; max-width:100%; height:auto; margin:20px auto}

 /* ===== 監督紹介 ===== */
.director {
  max-width: 880px;
  margin: 28px auto 44px;
  padding: 0 16px 40px;
  background: transparent; /* 段差防止のため背景は透明 */
}
.director::after {
  content: "";
  display: block;
  clear: both; /* 回り込み解除で高さを確保 */
}

.director-title {
  font-weight: 900;
  letter-spacing: .08em;
  font-size: clamp(18px, 3.6vw, 24px);
  color: #cfe7ff;
  margin: 0 0 10px;
  text-shadow: 0 0 12px rgba(143, 177, 255, .25);
  border-left: 4px solid #63ead9;
  padding-left: 10px;
}

.dir-photo {
  float: left;
  width: min(220px, 40%);
  aspect-ratio: 3/4;
  object-fit: cover;
  border-radius: 12px;
  margin: 4px 16px 8px 0;
  box-shadow: 0 12px 28px rgba(0, 0, 0, .28);
}

.director h2 {
  margin: 0 0 8px;
  font-size: clamp(18px, 3.4vw, 22px);
  letter-spacing: .04em;
}

.director p {
  margin: .5em 0;
  line-height: 1.75;
  color: #dbe3ff;
}

.director p.last {
  margin-top: .8em;
  border-top: 1px solid #1d2a55;
  padding-top: .8em;
}

@media (max-width: 680px) {
  .dir-photo {
    float: none;
    display: block;
    margin: 0 auto 12px;
    width: min(64vw, 320px);
  }
}

  /* ===== ヒーロー（字幕表示） ===== */
  .stage{
    position:relative;
    min-height:60vh;
    background:#0b1122 center/contain no-repeat; /* 画像はJSで当てる */
    background-size:auto 100%;
    box-shadow:0 20px 60px rgba(0,0,0,.35), inset 0 0 120px rgba(0,0,0,.45);
    border-radius:12px;
    overflow:hidden;
  }
  .veil{
    position:absolute; inset:0;
    background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.65));
    pointer-events:none; /* ← クリックを邪魔しない */
  }
  .cat{
    position:absolute; left:24px; bottom:18px; width:min(24vw,120px); aspect-ratio:1;
    background: radial-gradient(circle at 60% 40%, #111 0 52%, transparent 53%),
                radial-gradient(circle at 40% 40%, #111 0 52%, transparent 53%),
                radial-gradient(60% 18% at 50% 72%, #111 0 49%, transparent 50%);
    filter: drop-shadow(0 0 10px rgba(0,0,0,.6));
    mask: radial-gradient(60% 60% at 50% 55%, #000 70%, transparent 71%);
    border-radius:50%;
  }
  .controls{
    position:absolute; left:16px; bottom:16px; z-index:5;
    display:flex; gap:8px;
  }
  .btn{
    border:1px solid #2a3b6e; background:#0a1430; color:var(--ink);
    padding:10px 14px; border-radius:12px; font-weight:800; letter-spacing:.08em; cursor:pointer;
  }
  .btn:disabled{opacity:.6; cursor:not-allowed}

  /* ===== 字幕 ===== */
  .subs{
    position:absolute; left:50%; bottom:25%;
    transform:translateX(-50%);
    width:min(92vw,900px);
    padding:10px 14px; text-align:center; pointer-events:none;
    z-index:4;
  }
  .subs-line{
    display:inline-block;
    font-family:"Yu Mincho","Hiragino Mincho ProN",serif;
    font-weight:700; font-size:clamp(18px,2.6vw,28px);
    line-height:1.35; letter-spacing:.02em;
    color:#f5f2e6; /* クリーム寄りの白 */
    text-shadow:
      -1px -1px 0 #000,  1px -1px 0 #000,
      -1px  1px 0 #000,  1px  1px 0 #000,
       0    0   8px rgba(0,0,0,.35);
    min-height:2.4em;
  }
  .subs-audio{
    position:absolute; right:6px; bottom:-6px; transform:translateY(100%);
    pointer-events:auto; border:none; border-radius:10px;
    padding:4px 8px; font-size:14px; cursor:pointer;
    color:#061627; background:linear-gradient(180deg,#71ffd8,#55e3c4);
    box-shadow:0 2px 10px rgba(0,0,0,.3);
  }
  .subs-audio[aria-pressed="false"]{ filter:grayscale(1) brightness(.75); }

  .hr{height:1px; background:linear-gradient(90deg,transparent,#2b3f6e,transparent); margin:20px 0}

  /* ===== 猫ギャラリー ===== */
  .cat-grid{
    display:grid; gap:12px;
    grid-template-columns: repeat(2, 1fr);
  }
  @media (min-width:640px){ .cat-grid{ grid-template-columns: repeat(3, 1fr);} }
  @media (min-width:980px){ .cat-grid{ grid-template-columns: repeat(4, 1fr);} }

  .cat-card{
    position:relative; overflow:hidden; border-radius:12px;
    background:#0b1329; border:1px solid #233059;
    box-shadow: 0 12px 28px rgba(0,0,0,.22) inset;
  }
  .cat-card img{
    display:block; width:100%;
    height:180px; object-fit:cover; object-position:center;
    filter:saturate(1.03) contrast(1.02);
  }
  .cat-card.is-gif img{ height:220px; }
  @media (max-width:480px){
    .cat-card img{ height:160px; }
    .cat-card.is-gif img{ height:180px; }
  }
  .cat-badge {
    position:absolute; top:8px; right:8px;
    padding:2px 6px; font-size:12px; font-weight:800;
    border-radius:6px; letter-spacing:.04em;
    color:#061627; background:linear-gradient(180deg,#71ffd8,#56e3c5);
    box-shadow:0 2px 10px rgba(0,0,0,.25);
  }
  .cat-meta{
    display:flex; justify-content:space-between; align-items:center; gap:8px;
    padding:8px 10px; font-size:13px; color:var(--muted);
  }
  .cat-actions a{
    text-decoration:none; border:1px solid #2a3b6e; border-radius:8px; padding:4px 8px; color:var(--ink);
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <img src="images/logo_necologia.jpg" alt="FictitiousTV オリジナルアニメ ネコロジア" class="logo-img">
    </header>

    <section class="stage" aria-label="あらすじ・シネマティック表示">
      <div class="veil"></div>
      <div class="cat" aria-hidden="true"></div>

      <div class="controls">
        <button class="btn" id="playBtn">▶ はじめる</button>
        <button class="btn" id="replayBtn">⟲ もう一度</button>
      </div>

      <!-- 字幕 -->
      <div class="subs" id="subs">
        <div class="subs-line" id="subsText"></div>
     
      </div>
    </section>


<div class="hr"></div>
<!-- 監督紹介 -->
<section class="director" id="director">
  <h1 class="director-title">監督紹介</h1>
  <img class="dir-photo" src="images/director_mima.jpg" alt="三馬 智宏（みま ともひろ）">
  <h2>三馬 智宏（みま ともひろ）</h2>
  <p>1973年、アメリカ・オハイオ州生まれ。茅張芸術大学商業デザイン学部を卒業後、ヴァイオアニメーションに入社。</p>
  <p>『フットフォルト！』（98年）、『Double Dribbler』（00年）では動画、『オフサイドフラッグはお好き？』（01年）で初めて原画を担当。</p>
  <p>2004年にはスタジオアペタイに籍を移し、人気アニメのスピンオフ映画『劇場版 Gottani Girls Neo』（07年）で初監督に抜擢。以降は『剣道部ならこれを食えっ！』（11年）、『生産者の顔が見えなくて、夏』（17年）などヒット作を連発。『今日もボルシチで乾杯―沖縄編―』（21年）では、アニメーション映画史上96番目となる31億円の興行収入を記録。</p>
  <p>トレードマークは現場に必ず着てくるアロハシャツ。現在は妻、高校生の娘、2匹の気まぐれな猫と暮らしている。</p>
</section>

<div class="hr"></div>
<!-- グッズ（そのまま） -->
<section class="wrap goods" style="padding:40px 16px; text-align:center;">
  <h2 style="font-size:clamp(20px,4vw,28px); margin-bottom:16px; color:#f5f0e8;">
    ネコロジア公式グッズ
  </h2>
  <img src="images/plush.jpg" alt="ネコロジアぬいぐるみ" style="max-width:300px; width:100%; height:auto; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.3);">
  <p style="margin-top:12px; font-size:14px; color:#9ab0d4;">
    ただいま準備中です。販売開始をお楽しみに！
  </p>
</section>

    <div class="hr"></div>

    <!-- 猫フォト・ギャラリー -->
    <section class="wrap" id="cats">
      <h2 style="margin:0 0 10px; letter-spacing:.06em;">猫フォト・ギャラリー</h2>
      <p style="margin:0 0 16px; color:#9ab0d4">カード下の「DL」で保存できます。</p>
      <div class="cat-grid" id="catGrid" aria-live="polite"></div>
    </section>

  <!-- BGM -->
  <audio id="bgm" preload="auto" loop src="AUDIO_SRC"></audio>

<script>
/* ============ 設定 ============ */
const AUDIO_SRC = 'audio/Nekologia.mp3';    // ← BGMファイルの相対パス
const BG_IMAGE  = 'images/city_neon.jpg';   // ← 背景画像の相対パス

/* 反映 */
document.getElementById('bgm').src = AUDIO_SRC;
document.querySelector('.stage').style.backgroundImage =
  `linear-gradient(transparent,transparent), url('${BG_IMAGE}')`;

/* ============ 猫ギャラリー ============ */
const CAT_IMAGES = [
  'cats/loop01.gif',
  'cats/loop02.gif',
  'cats/cat01.jpg',
  'cats/cat02.jpg',
  'cats/cat03.jpg',
  'cats/cat04.jpg',
  'cats/cat05.jpg',
  'cats/cat06.JPG',
];
const grid = document.getElementById('catGrid');
function fileNameFromPath(p){ return p.split('/').pop(); }
function isGif(path){ return /\.gif$/i.test(path); }
function renderCats(){
  if(!grid) return;
  grid.innerHTML = '';
  CAT_IMAGES.forEach((src, i)=>{
    const gif = isGif(src);
    const card = document.createElement('div');
    card.className = 'cat-card' + (gif ? ' is-gif' : '');
    const img = document.createElement('img');
    img.loading = 'lazy'; img.decoding = 'async';
    img.src = src; img.alt = (gif ? 'GIF' : '画像') + ' 猫 ' + (i+1);
    card.appendChild(img);
    if(gif){
      const badge = document.createElement('span');
      badge.className = 'cat-badge'; badge.textContent = 'GIF';
      card.appendChild(badge);
    }
    const meta = document.createElement('div');
    meta.className = 'cat-meta';
    const name = document.createElement('span');
    name.textContent = fileNameFromPath(src);
    const actions = document.createElement('div');
    actions.className = 'cat-actions';
    const a = document.createElement('a');
    a.href = src; a.download = fileNameFromPath(src); a.textContent = 'DL';
    actions.appendChild(a);
    meta.appendChild(name); meta.appendChild(actions);
    card.appendChild(meta);
    grid.appendChild(card);
  });
}
renderCats();

/* ============ 効果音（柔らかい音） ============ */
let audioCtx = null;
let soundOn = true;
function playClick(){
  if(!soundOn) return;
  if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  const t = audioCtx.currentTime;
  osc.type = 'sine';
  osc.frequency.value = 420;
  gain.gain.setValueAtTime(0.02, t);
  gain.gain.exponentialRampToValueAtTime(0.001, t + 0.1);
  osc.connect(gain); gain.connect(audioCtx.destination);
  osc.start(t); osc.stop(t + 0.12);
}

/* ============ 字幕タイプ表示 ============ */
const subsEl = document.getElementById('subsText');
function wait(ms){ return new Promise(r=>setTimeout(r,ms)); }
async function typeLine(text, cps=26){
  subsEl.textContent = '';
  const delay = 1000 / cps;
  for (const ch of text){
    subsEl.textContent += ch;
    if(!/[\s　、。・，．…]/.test(ch)) playClick();
    await wait(delay);
  }
}
let subPlaying = false;
async function playSubtitles(lines, cps=26, hold=900){
  if(subPlaying) return;
  subPlaying = true;
  for(const line of lines){
    await typeLine(line, cps);
    await wait(hold);
  }
  subPlaying = false;
}

/* ============ ボタン：BGM＋字幕起動 ============ */
const playBtn   = document.getElementById('playBtn');
const replayBtn = document.getElementById('replayBtn');
const bgm       = document.getElementById('bgm');

const SUB_LINES = [
  '22世紀。大戦の傷跡が残る辺境都市で、',
  '記憶を失った戦争孤児の青年は、',
  '名前を持たずに生きる一匹の猫と出会う。',
  '失われた記憶と、与えられなかった呼び名を求めて、',
  '旅立ったふたりは、ある出来事をきっかけに、',
  '名前がなければ存在すら許されず、',
  '見つかり次第ネコ型ロボットに“抹消”される、',
  '超監視型全体主義国家『ネコロジア』へと迷い込む。',
  '名もなき青年と猫に、',
  'この世界が“誰か”としての明日を',
  '許してくれる未来は訪れるのだろうか。'
];

playBtn?.addEventListener('click', async ()=>{
  try { bgm.currentTime = 0; await bgm.play(); } catch(e){}
  playSubtitles(SUB_LINES, 5, 900);
});
replayBtn?.addEventListener('click', async ()=>{
  try { bgm.currentTime = 0; await bgm.play(); } catch(e){}
  playSubtitles(SUB_LINES, 5, 900);
});
</script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js').catch(console.error);
    });
  }
</script>

</body>
</html>
